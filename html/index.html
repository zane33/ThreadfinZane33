<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Threadfin</title>
  
  <!-- Modern Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous">
  
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="css/base.css" type="text/css">
  <link rel="stylesheet" href="css/screen.css" type="text/css">
  
  <link rel="icon" href="img/threadfin.ico">
  
  <script>
    // Theme management
    (function() {
      const theme = localStorage.getItem('theme') || 'dark';
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script>
</head>

<body onload="javascript: PageReady();">
  <!-- Skip Link for Accessibility -->
  <a href="#content" class="skip-link">Skip to main content</a>
  
  <!-- Loading Announcement for Screen Readers -->
  <div id="loading-announcement" class="sr-only" aria-live="assertive" aria-atomic="true"></div>

  <div id="loading" class="modal fade">
    <div class="modal-dialog loader"></div>
  </div>

  <div id="popup" class="modal fade">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header" id="popup_header"></div>
        <div class="modal-body">
          <div class="container-fluid">
            <div class="row">
              <div id="popup-custom"></div>
            </div>
          </div>
        </div>
        <div class="modal-footer" id="popup_footer"></div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="server_information" tabindex="-1" aria-labelledby="server-info-title" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="server-info-title">Server Information</h3>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close server information dialog"></button>
        </div>
        <div class="modal-body">
          <div class="container-fluid">
            <div class="row">
              <div class="card text-bg-dark mb-3">
                <div class="card-header">
                  <h4>Server Information</h4>
                </div>
                <div class="card-body">
                  <div class="mb-3">
                    <label for="version" class="form-label">Threadfin Version</label>
                    <input type="text" class="form-control" id="version" readonly disabled aria-describedby="version-help">
                    <div id="version-help" class="form-text sr-only">Current version of Threadfin server</div>
                  </div>
                  <div class="mb-3">
                    <label for="branch" class="form-label">Threadfin Branch</label>
                    <input type="text" class="form-control" id="branch" readonly disabled aria-describedby="branch-help">
                    <div id="branch-help" class="form-text sr-only">Current git branch of Threadfin</div>
                  </div>
                  <div class="mb-3">
                    <label for="errors" class="form-label">Errors</label>
                    <input type="text" class="form-control" id="errors" readonly disabled aria-describedby="errors-help">
                    <div id="errors-help" class="form-text sr-only">Number of system errors</div>
                  </div>
                  <div class="mb-3">
                    <label for="warnings" class="form-label">Warnings</label>
                    <input type="text" class="form-control" id="warnings" readonly disabled aria-describedby="warnings-help">
                    <div id="warnings-help" class="form-text sr-only">Number of system warnings</div>
                  </div>
                </div>
              </div>
              <div class="card text-bg-dark mb-3">
                <div class="card-header">
                  <h4>Stream Information</h4>
                </div>
                <div class="card-body">
                  <div class="mb-3">
                    <label for="DVR" class="form-label">DVR IP</label>
                    <input type="text" class="form-control" id="DVR" readonly disabled aria-describedby="dvr-help">
                    <div id="dvr-help" class="form-text sr-only">IP address for DVR connection</div>
                  </div>
                  <div class="mb-3">
                    <label for="m3u-url" class="form-label">M3U URL</label>
                    <div class="input-group">
                      <input type="text" class="form-control" id="m3u-url" readonly aria-describedby="m3u-help">
                      <button class="input-group-text copy-btn" data-clipboard-target="#m3u-url" aria-label="Copy M3U URL to clipboard" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Copy to clipboard">
                        <i class="far fa-clipboard" aria-hidden="true"></i>
                      </button>
                    </div>
                    <div id="m3u-help" class="form-text">URL for M3U playlist. Specific groups: [http://...?group-title=foo,bar]</div>
                  </div>
                  <div class="mb-3">
                    <label for="xepg-url" class="form-label">XMLTV URL</label>
                    <div class="input-group">
                      <input type="text" class="form-control" id="xepg-url" readonly aria-describedby="xepg-help">
                      <button class="input-group-text copy-btn" data-clipboard-target="#xepg-url" aria-label="Copy XMLTV URL to clipboard" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Copy to clipboard">
                        <i class="far fa-clipboard" aria-hidden="true"></i>
                      </button>
                    </div>
                    <div id="xepg-help" class="form-text">URL for XMLTV EPG data</div>
                  </div>
                  <div class="mb-3">
                    <label for="streams" class="form-label">Filtered Channels</label>
                    <input type="text" class="form-control" id="streams" readonly disabled aria-describedby="streams-help">
                    <div id="streams-help" class="form-text sr-only">Number of filtered channels</div>
                  </div>
                  <div class="mb-3">
                    <label for="xepg" class="form-label">Mapped Channels</label>
                    <input type="text" class="form-control" id="xepg" readonly disabled aria-describedby="mapped-help">
                    <div id="mapped-help" class="form-text sr-only">Number of mapped channels</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <nav class="navbar navbar-expand-lg sticky-top navbar-dark bg-black" role="navigation" aria-label="Main navigation">
    <div class="container-fluid">
      <a class="navbar-brand" href="/web" aria-label="Threadfin Home">
        <span id="logo" role="img" aria-label="Threadfin Logo"></span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation menu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mx-auto mb-2 mb-lg-0" id="main-menu" role="menubar">
        </ul>
        <div class="col-md-2 col-sm-2" aria-label="Connection status">
          <p id="playlist-connection-information" aria-live="polite">
          </p>
          <p id="client-connection-information" aria-live="polite">
          </p>
        </div>
        <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <button class="nav-link btn btn-link" data-bs-toggle="modal" data-bs-target="#server_information" aria-label="Show server information">
              <i class="fas fa-info-circle" aria-hidden="true"></i>
              <span class="sr-only">Server Information</span>
            </button>
          </li>
          <li class="nav-item">
            <button class="theme-toggle nav-link btn btn-link" onclick="toggleTheme()" aria-label="Toggle between dark and light themes" title="Toggle Dark/Light Mode">
              <i class="fas fa-moon theme-icon-dark" aria-hidden="true"></i>
              <i class="fas fa-sun theme-icon-light hidden" aria-hidden="true"></i>
              <span class="sr-only">Toggle Theme</span>
            </button>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  
  <!-- System Monitor Bar -->
  <div id="system-monitor-bar" class="system-monitor-container">
    <div class="container-fluid">
      <div class="row system-monitor-row">
        <div class="col-md-2 col-sm-6 col-6">
          <div class="monitor-item">
            <i class="fas fa-microchip"></i>
            <span class="monitor-label">CPU</span>
            <div class="progress-container">
              <div class="progress-bar" id="cpu-progress">
                <div class="progress-fill" id="cpu-fill"></div>
              </div>
              <span class="monitor-value" id="cpu-value">0%</span>
            </div>
          </div>
        </div>
        <div class="col-md-2 col-sm-6 col-6">
          <div class="monitor-item">
            <i class="fas fa-memory"></i>
            <span class="monitor-label">Memory</span>
            <div class="progress-container">
              <div class="progress-bar" id="memory-progress">
                <div class="progress-fill" id="memory-fill"></div>
              </div>
              <span class="monitor-value" id="memory-value">0MB</span>
            </div>
          </div>
        </div>
        <div class="col-md-2 col-sm-6 col-6">
          <div class="monitor-item">
            <i class="fas fa-stream"></i>
            <span class="monitor-label">Streams</span>
            <div class="monitor-text">
              <span class="monitor-value" id="streams-value">0 / 0</span>
            </div>
          </div>
        </div>
        <div class="col-md-2 col-sm-6 col-6">
          <div class="monitor-item">
            <i class="fas fa-network-wired"></i>
            <span class="monitor-label">Network</span>
            <div class="monitor-text">
              <span class="monitor-value" id="network-value">0 Mbps</span>
            </div>
          </div>
        </div>
        <div class="col-md-2 col-sm-6 col-6">
          <div class="monitor-item">
            <i class="fas fa-clock"></i>
            <span class="monitor-label">Uptime</span>
            <div class="monitor-text">
              <span class="monitor-value" id="uptime-value">0s</span>
            </div>
          </div>
        </div>
        <div class="col-md-2 col-sm-6 col-6">
          <div class="monitor-item">
            <i class="fas fa-info-circle"></i>
            <span class="monitor-label">Status</span>
            <div class="monitor-text">
              <span class="monitor-value status-indicator" id="status-value">●</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <main class="container-flex" role="main">
      <div class="row">
        <div class="col-md-12 col-sm-12">
          <div id="content" class="table-responsive" tabindex="-1"></div>
        </div>
      </div>
      <section class="row" id="myStreamsBox" aria-label="Stream monitoring">
        <div class="col-md-5 col-sm-12 table-responsive float-start">
          <table class="table table-dark table-bordered caption-top" id="activeStreams" role="table" aria-label="Active streams"></table>
        </div>
        <div class="col-md-5 col-sm-12 table-responsive float-end">
          <table class="table table-dark table-bordered caption-top" id="inactiveStreams" role="table" aria-label="Inactive streams"></table>
        </div>
      </section>
    </main>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.10/clipboard.min.js"></script>
  
  <!-- Theme Toggle Script -->
  <script>
    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      
      // Update theme icons
      const darkIcon = document.querySelector('.theme-icon-dark');
      const lightIcon = document.querySelector('.theme-icon-light');
      
      if (newTheme === 'light') {
        darkIcon.classList.add('hidden');
        lightIcon.classList.remove('hidden');
      } else {
        darkIcon.classList.remove('hidden');
        lightIcon.classList.add('hidden');
      }
    }
    
    // Initialize theme icons on page load
    document.addEventListener('DOMContentLoaded', function() {
      const theme = document.documentElement.getAttribute('data-theme');
      const darkIcon = document.querySelector('.theme-icon-dark');
      const lightIcon = document.querySelector('.theme-icon-light');
      
      if (theme === 'light') {
        darkIcon.classList.add('hidden');
        lightIcon.classList.remove('hidden');
      }
    });
  </script>
  
  <!-- Modern UI Enhancements -->
  <script language="javascript" type="text/javascript" src="js/modern-ui.js"></script>
  
  <script language="javascript" type="text/javascript" src="js/network_ts.js"></script>
  <script language="javascript" type="text/javascript" src="js/menu_ts.js"></script>
  <script language="javascript" type="text/javascript" src="js/settings_ts.js"></script>
  <script language="javascript" type="text/javascript" src="js/logs_ts.js"></script>
  <script language="javascript" type="text/javascript" src="js/base_ts.js"></script>
</body>

</html>